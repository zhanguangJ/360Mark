"use strict";!function(){loginResgin(),window.onresize=window.onscroll=function(){toTop()},new Promise(function(a){$.ajax({type:"get",url:"../api/main.php",async:!0,data:{id:55,time:new Date},success:function(t){a(t)}})}).then(function(t){var a=JSON.parse(t);$html=a.map(function(t){return'<li data-name="'+t.name+'" class="">\n                            <div class="sug-item">\n                                '+t.name+'\n                            </div>\n                            <div class="desc">约有'+t.sum+"件</div>\n                        </li>"}).join(""),$(".__mall_suggest__").html($html)}).then(function(){!function(){$(".text").click(function(t){$(".__mall_suggest__").css("display","block"),t.stopPropagation()}),$(".__mall_suggest__").on("click","li",function(){var t=$(this).attr("data-name");window.open("src/html/list.html?"+t)});var i=-1,e=$(".__mall_suggest__ li").size();$(document).ready(function(){$(".text").keydown(function(t){if(40===t.keyCode){i++;for(var a=0;a<e;a++)$(".__mall_suggest__ li").eq(a).removeClass("active");e-1<i&&(i=0),$val=$(".__mall_suggest__ li").eq(i).children("div").eq(0).html().trim(),$(".text").attr("placeholder",""),$(".text").val($val),$(".__mall_suggest__ li").eq(i).addClass("active")}if(38===t.keyCode){for(i--,a=0;a<e;a++)$(".__mall_suggest__ li").eq(a).removeClass("active");i<0&&(i=e-1),$val=$(".__mall_suggest__ li").eq(i).children("div").eq(0).html().trim(),$(".text").attr("placeholder",""),$(".text").val($val),$(".__mall_suggest__ li").eq(i).addClass("active")}if(13===t.keyCode){var n=$(".__mall_suggest__ li").eq(i).children("div").eq(0).html().trim();window.open("src/html/list.html?"+n)}})}),$(document).click(function(){$(".__mall_suggest__").css("display","none"),$(".text").attr("placeholder","360儿童手表"),$(".text").val("")}),$(".search").click(function(){var t=$(".text").attr("placeholder")+$(".text").val();window.open("../html/list.html?"+t.trim())})}()});var n,e=20,i="",t=decodeURI(location.search).split("?")[1];function l(t,n,i){new Promise(function(a){$.ajax({type:"get",url:"../api/list.php",data:{num:e,page:t,order:n,baobei:i,time:new Date},success:function(t){a(t)}})}).then(function(t){var a=JSON.parse(t);a.total?($html=a.content.map(function(t){return'<li class="list-item">\n                            <dl class="desc">\n                                <dt class="pic">\n                                    <a href="javascript:;">\n                                        <img src="../img/'+t.title+t.bigimg+'.jpg" class="lazy" data-id="'+t.id+'"/>\n                                    </a>\n                                </dt>\n                                <dd class="cont">\n                                    <a href="javascript:;">\n                                        <span class="title" data-id="'+t.id+'">\n                                            '+t.name+'\n                                        </span>\n                                        <span class="price" data-id="'+t.id+'">\n                                            <span>￥</span>\n                                            '+t.price+'\n                                        </span>\n                                    </a>\n                                </dd>\n                                <dd class="addbtns"  data-id="'+t.id+'">\n                                    <a href="javascript:;" class="add-cart" color="#fa5437">\n                                        加入购物车\n                                    </a>\n                                </dd>\n                            </dl>\n                            <div class="addSuccess">成功添加至购物车</div>\n                        </li>'}).join(""),$(".list").html($html)):$(".list").html("抱歉，没有找到您搜索的相关商品")}).then(function(){undateStatus()})}function a(){$.ajax({type:"get",url:"../api/list.php",data:{num:e,page:1,order:i,baobei:n,time:new Date},success:function(t){var a=JSON.parse(t).total;layui.use("laypage",function(){layui.laypage.render({elem:"pageBtnWrap",count:a,limit:e,curr:1,jump:function(t,a){currPage=t.curr,a||l(currPage,i,n)}})})}})}(n=t)?($html='<span class="default_path">\n                        <a href="javascript:;">首页</a>\n                        <i>></i>\n                        <a href="javascript:;">全部搜索结果</a>\n                        <i>></i>\n                        <a href="javascript:;">'+t+"</a>\n                    </span>",$html2='<a href="javascript:;" title="'+t+'">'+t+"</a>"):($html='<span class="default_path">\n                        <a href="javascript:;">首页</a>\n                        <i>></i>\n                        <a href="javascript:;">全部搜索结果</a>\n                    </span>',$html2='  <a href="javascript:;" title="智能家居">智能家居</a>\n                        <a href="javascript:;" title="智能穿戴">智能穿戴</a>\n                        <a href="javascript:;" title="汽车用品">汽车用品</a>\n                        <a href="javascript:;" title="母婴玩具">母婴玩具</a>'),$(".default_path").html($html),$(".unspread").html($html2),l(1,i,n),a(),$(".default").click(function(){i="",$(this).next().children("span").html(""),l(1,i,n),a()});var s=!0;$(".pricesort").click(function(){"price",s?(i="ASC",$(this).children("span").html("↑")):(i="DESC",$(this).children("span").html("↓")),s=!s,l(1,i,n),a()}),$(".list").on("click","img",function(){var t=$(this).attr("data-id");window.open("../html/details.html?"+t)}),$(".list").on("click","span",function(){var t=$(this).attr("data-id");window.open("../html/details.html?"+t)})}();